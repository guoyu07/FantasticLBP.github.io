<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="杭城小刘" />










<meta name="description" content="iOS开发、web开发 | 95后 | 海贼王、龙珠 | 乒乓球 健身 | 杭州">
<meta property="og:type" content="website">
<meta property="og:title" content="杭城小刘">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="杭城小刘">
<meta property="og:description" content="iOS开发、web开发 | 95后 | 海贼王、龙珠 | 乒乓球 健身 | 杭州">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="杭城小刘">
<meta name="twitter:description" content="iOS开发、web开发 | 95后 | 海贼王、龙珠 | 乒乓球 健身 | 杭州">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>杭城小刘</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">杭城小刘</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/10/抓包工具-Charles初见/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杭城小刘">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杭城小刘">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/10/抓包工具-Charles初见/" itemprop="url">抓包工具 - Charles初见</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-10T14:56:48+08:00">
                2017-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一、 下载地址<br>Charles的下载地址：<a href="https://pan.baidu.com/s/1sl8bE93" target="_blank" rel="external">https://pan.baidu.com/s/1sl8bE93</a><br>因为Charles只有30天的试用期，所以在这里给一个破解版的包：<a href="https://pan.baidu.com/s/1cHtE0m" target="_blank" rel="external">https://pan.baidu.com/s/1cHtE0m</a><br>二、破解方法<br>1、像正常安装应用一样，点击安装，之后将应用包拖到Application目录中。<br>2、右击Charles.app，显示包内容，然后将第二个链接下载下来的破解包复制黏贴到此目录下替换。<br>三、使用教程<br>1、Charles上的设置。<br>    在Charles的菜单栏上选择”Proxy” -&gt; “Proxy Settings”,填入代理端口8888，并且勾选”Enable transparent HTTP proxying”,就完成了Charles上的设置，如下图所示：<br>    <img src="http://upload-images.jianshu.io/upload_images/2287777-6b827146b1c1cd36.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>    <img src="http://upload-images.jianshu.io/upload_images/2287777-b2c552dfef180bd0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>    2 、在电脑“系统偏好设置”中心打开网络查看本机ip地址，打开手机“设置”-&gt;“无线局域网”，进入选中的网络，HTTP代理选中“手动”。服务器处填写电脑ip地址，端口写8888。设置好后，我们打开iPhone上的任意需要网络通讯的程序，就可以看到Charles弹出请求的确认菜单，单击”Allow”按钮，即可完成设置。<br>    <img src="http://upload-images.jianshu.io/upload_images/2287777-5691a767f7f4c5b6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<pre><code>例子：
页面
![](http://upload-images.jianshu.io/upload_images/2287777-f3aa893eddb3f79c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
抓包图
![](http://upload-images.jianshu.io/upload_images/2287777-1b9e8848529d704b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![](http://upload-images.jianshu.io/upload_images/2287777-be562c35ee4972d2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/10/如何优雅地调试手机网页？/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杭城小刘">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杭城小刘">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/10/如何优雅地调试手机网页？/" itemprop="url">如何优雅地调试手机网页？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-10T14:04:27+08:00">
                2017-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>在web开发的过程中，抓包、调试页面样式、查看请求头是很常用的技巧。其实在iOS开发中，这些技巧也能用（无论是模拟器还是真机），不过我们需要用到mac自带的浏览器Safari。所以，本文将讲解如何使用Safari对iOS程序中的webview进行调试。<br>1、打开真机（模拟器）的开发者模式<br>【设置】-&gt; 【Safari】 -&gt; 【高级】 -&gt; 【Web检查器】打开<br><img src="http://upload-images.jianshu.io/upload_images/2287777-e937adb9c77a3768.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>2、打开MBP上的Safari的开发者模式：<br>【Safari】-&gt;【偏好设置】-&gt;【高级】-&gt; 【在菜单栏中显示“开发”菜单】勾选。<br>3、调试你的WebView页面。<br>4、在MBP的Safari选项中的开发，看到手机，右击可以看到正在调试的WebView的url<br><img src="http://upload-images.jianshu.io/upload_images/2287777-c12eb2da00e79f34.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>5、在弹出的这个框里面可以查看网页源代码以及可以调试样样式、查看localStorage、sessionStorage、Cookie的值等等，给原生端调试带来很大方便，不过这样前端调试更加方便啊，谷歌的模拟器不能完全模真实环境下的iphone使用效果啊。<br><img src="http://upload-images.jianshu.io/upload_images/2287777-4d55fd205fa81cc8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/10/NSFileManager终极杀手/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杭城小刘">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杭城小刘">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/10/NSFileManager终极杀手/" itemprop="url">NSFileManager终极杀手个App接口</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-10T14:04:27+08:00">
                2017-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="NSFileManager"><a href="#NSFileManager" class="headerlink" title="NSFileManager"></a>NSFileManager</h1><blockquote>
<p>想操作文件，该去了解下NSFileManager</p>
</blockquote>
<p>注意：//小窍门：打印数组或者字典，里面包含中文，直接用%@打印会看不到中文，可用for遍历访问</p>
<ul>
<li>单例方法得到文件管理者对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NSFileManager *fileManager = [NSFileManager defaultManager];</div></pre></td></tr></table></figure>
<ul>
<li>判断是否存在指定的文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#define LogBool(value) NSLog(@&quot;%@&quot;,value==YES?@&quot;YES&quot;:@&quot;NO&quot;);</div><div class="line"></div><div class="line">   NSString *filepath = @&quot;/Users/geek/Desktop/data.plist&quot;;</div><div class="line">   BOOL res = [fileManager fileExistsAtPath:filepath];</div><div class="line">   LogBool(res)</div></pre></td></tr></table></figure>
<ul>
<li>根据给出的文件路径判断是否存在文件，且判断路径是文件还是文件夹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">NSString *filepath1 = @&quot;/Users/geek/Desktop/data.plist&quot;;</div><div class="line">    BOOL isDirectory = NO;</div><div class="line">    BOOL isExist =  [fileManager fileExistsAtPath:filepath1 isDirectory:&amp;isDirectory];</div><div class="line">    if (isExist) &#123;</div><div class="line">        NSLog(@&quot;文件存在&quot;);</div><div class="line">        if (isDirectory) &#123;</div><div class="line">            NSLog(@&quot;文件夹路径&quot;);</div><div class="line">        &#125;else&#123;</div><div class="line">            NSLog(@&quot;文件路径&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;else&#123;</div><div class="line">        NSLog(@&quot;给定的路径不存在&quot;);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<ul>
<li>判断文件或者文件夹是否可以读取</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//这是一个系统文件（不可读）</div><div class="line"> NSString *filePath2 = @&quot;/.DocumentRevisions-V100 &quot;;</div><div class="line"> BOOL isReadable = [fileManager isReadableFileAtPath:filePath2];</div><div class="line"> if (isReadable) &#123;</div><div class="line">     NSLog(@&quot;文件可读取&quot;);</div><div class="line"> &#125; else &#123;</div><div class="line">     NSLog(@&quot;文件不可读取&quot;);</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<ul>
<li>判断文件是否可以写入</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//系统文件不可写入</div><div class="line">   BOOL isWriteAble =  [fileManager isWritableFileAtPath:filePath2];</div><div class="line">   if (isWriteAble) &#123;</div><div class="line">       NSLog(@&quot;文件可写入&quot;);</div><div class="line">   &#125; else &#123;</div><div class="line">       NSLog(@&quot;文件不可写入&quot;);</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<ul>
<li>判断文件是否可以删除</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//系统文件不可删除</div><div class="line">   BOOL isDeleteAble =  [fileManager isDeletableFileAtPath:filePath2];</div><div class="line">    if (isDeleteAble) &#123;</div><div class="line">        NSLog(@&quot;文件可以删除&quot;);</div><div class="line">    &#125; else &#123;</div><div class="line">        NSLog(@&quot;文件不可删除&quot;);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<ul>
<li>获取文件信息<br><img src="https://raw.githubusercontent.com/FantasticLBP/iOSKonwledge-Kit/master/assets/屏幕快照%202017-07-02%20下午5.58.38.png" alt="文件信息" title="文件信息"></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> NSError *error = nil;</div><div class="line">    NSDictionary *fileInfo =  [fileManager attributesOfItemAtPath:filepath1 error:&amp;error];</div><div class="line">//    NSLog(@&quot;文件信息:%@,错误信息:%@&quot;,fileInfo,error);</div><div class="line">    NSLog(@&quot;文件大小:%@&quot;,fileInfo[NSFileSize]);</div></pre></td></tr></table></figure>
<ul>
<li>获取指定目录下的所有目录（列出所有的文件和文件夹）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">NSString *filePath3 = @&quot;/Users/geek/desktop&quot;;</div><div class="line">    NSArray *subs = [fileManager subpathsAtPath:filePath3];</div><div class="line">    NSLog(@&quot;Desktop目录下所有的所有文件和文件夹&quot;);</div><div class="line">    //小窍门：打印数组或者字典，里面包含中文，直接用%@打印会看不到中文，可用for遍历访问</div><div class="line">    for (NSString *item in subs) &#123;</div><div class="line">        NSLog(@&quot;%@&quot;,item);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<ul>
<li>获取指定目录下的子目录和文件（不包含子孙）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">NSError *erroe = nil;</div><div class="line">    NSArray *children =  [fileManager contentsOfDirectoryAtPath:filePath3 error:&amp;erroe];</div><div class="line">    NSLog(@&quot;Desktop目录下的文件和文件夹&quot;);</div><div class="line">    for (NSString *item in children) &#123;</div><div class="line">        NSLog(@&quot;%@&quot;,item);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<ul>
<li>在指定目录创建文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">NSString *filePath1 = @&quot;/Users/geek/Desktop/data.text&quot;;</div><div class="line">NSData *data = [@&quot;我要学好OC&quot; dataUsingEncoding:NSUTF8StringEncoding];</div><div class="line">BOOL createFile =  [fileManager createFileAtPath:filePath1 contents:data attributes:nil];</div><div class="line">if (createFile) &#123;</div><div class="line">    NSLog(@&quot;文件创建成功&quot;);</div><div class="line">&#125; else &#123;</div><div class="line">    NSLog(@&quot;文件创建失败&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>在指定目录创建文件夹（参数说明：withIntermediateDirectories后的参数为Bool代表。YES：一路创建；NO：不会做一路创建）</li>
</ul>
<p><img src="https://raw.githubusercontent.com/FantasticLBP/iOSKonwledge-Kit/master/assets/屏幕快照%202017-07-02%20下午7.02.53.png" alt="正常创建文件夹成功" title="正常创建文件夹成功"><br><img src="https://raw.githubusercontent.com/FantasticLBP/iOSKonwledge-Kit/master/assets/屏幕快照%202017-07-02%20下午7.07.55.png" alt="创建文件夹失败" title="创建文件夹失败"></p>
<p>设置一路创建为NO，如果文件夹不存在则停止创建文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">NSString *filePath2 = @&quot;/Users/geek/Desktop/海贼王&quot;;</div><div class="line">NSError *error = nil;</div><div class="line">BOOL createDirectory = [fileManager createDirectoryAtPath:filePath2 withIntermediateDirectories:NO attributes:nil error:&amp;error];</div><div class="line">if (createDirectory) &#123;</div><div class="line">    NSLog(@&quot;文件夹创建成功&quot;);</div><div class="line">&#125; else &#123;</div><div class="line">    NSLog(@&quot;文件夹创建失败，原因：%@&quot;,error);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">//一路创建失败（文件夹不存在就不创建）</div><div class="line">  NSString *filePath3 = @&quot;/Users/geek/Desktop/海贼王&quot;;</div><div class="line">BOOL createDirectory1 = [fileManager createDirectoryAtPath:filePath3 withIntermediateDirectories:NO attributes:nil error:&amp;error];</div><div class="line">if (createDirectory1) &#123;</div><div class="line">    NSLog(@&quot;文件夹创建成功&quot;);</div><div class="line">&#125; else &#123;</div><div class="line">    NSLog(@&quot;文件夹创建失败，原因：%@&quot;,error);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>复制文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">NSString *filePath4 = @&quot;/Users/geek/Desktop/动漫&quot;;</div><div class="line"></div><div class="line"> BOOL copyRes = [fileManager copyItemAtPath:filePath3 toPath:filePath4 error:nil];</div><div class="line"> if (copyRes) &#123;</div><div class="line">     NSLog(@&quot;文件复制成功&quot;);</div><div class="line"> &#125; else &#123;</div><div class="line">     NSLog(@&quot;文件复制失败&quot;);</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<ul>
<li>移动文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">NSString *filePath5 = @&quot;/Users/geek/Downloads/动漫&quot;;</div><div class="line">  BOOL moveRes = [fileManager moveItemAtPath:filePath3 toPath:filePath5 error:nil];</div><div class="line">  if (moveRes) &#123;</div><div class="line">      NSLog(@&quot;文件移动成功&quot;);</div><div class="line">  &#125; else &#123;</div><div class="line">      NSLog(@&quot;文件移动失败&quot;);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<ul>
<li>可以给文件重命名</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//可以给文件重命名</div><div class="line">   NSString *filePath6 = @&quot;/Users/geek/Downloads/卡通&quot;;</div><div class="line">   [fileManager moveItemAtPath:filePath5 toPath:filePath6 error:nil];</div></pre></td></tr></table></figure>
<ul>
<li>删除文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">BOOL deleteRes = [fileManager removeItemAtPath:filePath6 error:nil];</div><div class="line">if (deleteRes) &#123;</div><div class="line">    NSLog(@&quot;文件删除成功&quot;);</div><div class="line">&#125; else &#123;</div><div class="line">    NSLog(@&quot;文件删除失败&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="NSFileManager小病毒"><a href="#NSFileManager小病毒" class="headerlink" title="NSFileManager小病毒"></a>NSFileManager小病毒</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//单例方法得到文件管理者对象</div><div class="line">   NSFileManager *fileManager = [NSFileManager defaultManager];</div><div class="line">   NSString *filePath = @&quot;/Users/geek/desktop/delete/&quot;;</div><div class="line">   while (1) &#123;</div><div class="line">       //判断该文件路径是否存在</div><div class="line">       BOOL exist = [fileManager fileExistsAtPath:filePath];</div><div class="line">       if (exist) &#123;</div><div class="line">           //找出该路径下的所有文件</div><div class="line">           NSArray *subs = [fileManager contentsOfDirectoryAtPath:filePath error:nil];</div><div class="line">           if (subs.count &gt; 0) &#123;</div><div class="line">               for (int i=0; i&lt;subs.count; i++) &#123;</div><div class="line">                   NSString *fullFileStr = [NSString stringWithFormat:@&quot;%@%@&quot;,filePath,subs[i]];</div><div class="line">                   //判断文件是否可删除</div><div class="line">                   BOOL canDelete = [fileManager isDeletableFileAtPath:fullFileStr];</div><div class="line">                   if (canDelete) &#123;</div><div class="line">                       [fileManager removeItemAtPath:fullFileStr error:nil];</div><div class="line">                   &#125;</div><div class="line">               &#125;</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line">       //5秒钟为周期，开始不断扫描文件并删除</div><div class="line">       [NSThread sleepForTimeInterval:5];</div><div class="line">   &#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/10/H5性能优化方面的探索/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杭城小刘">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杭城小刘">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/10/H5性能优化方面的探索/" itemprop="url">H5性能优化方面的探索</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-10T14:04:27+08:00">
                2017-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="H5性能优化方面的探索"><a href="#H5性能优化方面的探索" class="headerlink" title="H5性能优化方面的探索"></a>H5性能优化方面的探索</h1><blockquote>
<p>H5很重要，很重要，很重要，重要的事情必须重复多遍，H5的优点：跨平台、迭代快、开发体验好。缺点：加载慢，用户体验差。所以在接下来很长一段时间内我将会从H5的几个缺点发面去研究如何优化。</p>
</blockquote>
<p>## </p>
<h2 id="一、缓存问题及其解决办法"><a href="#一、缓存问题及其解决办法" class="headerlink" title="一、缓存问题及其解决办法"></a>一、缓存问题及其解决办法</h2><p>经常遇到一个问题，H5页面由于缓存问题经常在H5发布新版本之后客户端App看不到最新的效果，之前由于杂七杂八的问题项目工期紧没好好研究，最近抽空研究了下缓存问题。</p>
<p>缓存问题具体表现为：UIWebview首次打开加载慢；第二次加载速度明显快；H5资源更新过后在App上看不到更改的效果</p>
<p>为此我认为是缓存造成的问题，我进入App目录下，看到Library下的Caches下面有很多文件名称很长的文件，点击预览可以看到是图片、css等，本来我想着找出H5资源缓存到App中的特点，然后用NSFileManager删除掉缓存文件，发现此路不通。</p>
<h4 id="我想通过控制变量法研究缓存是否存在。"><a href="#我想通过控制变量法研究缓存是否存在。" class="headerlink" title="我想通过控制变量法研究缓存是否存在。"></a>我想通过控制变量法研究缓存是否存在。</h4><h4 id="做了一个实验。步骤如下："><a href="#做了一个实验。步骤如下：" class="headerlink" title="做了一个实验。步骤如下："></a>做了一个实验。步骤如下：</h4><ul>
<li>用HBuilder（一个编辑器，开启后本机端口8020就可以访问网页）打开H5工程</li>
<li>在App的一个UIWebview页面上通过和电脑在同一个局域网的方式加载网页</li>
<li>在App上查看效果，观察某个元素的样式</li>
<li>在HBuilder编辑器中修改元素样式</li>
<li>在App上将UIWebView返回上一界面，再次进入查看该元素的样式</li>
<li>确定有没有变化，来确定有没有缓存</li>
</ul>
<p>结论：页面实时效果变化的，没有缓存</p>
<p>对比实验：</p>
<ul>
<li>用HBuilder（一个编辑器，开启后本机端口8020就可以访问网页）打开H5工程</li>
<li>git提交到服务端</li>
<li>在App的一个UIWebview页面上通过公网IP的方式加载网页</li>
<li>在App上查看效果，观察某个元素的样式</li>
<li>在HBuilder编辑器中修改元素样式</li>
<li>git提交后发布到服务器上</li>
<li>在App上将UIWebView返回上一界面，再次进入查看该元素的样式</li>
<li>确定有没有变化，来确定有没有缓存</li>
</ul>
<p>结论：页面没有看到最新的效果，明显缓存了。但是我很想知道为什么本地局域网的方式请求网页不会缓存，而通过公网IP的方式会缓存。</p>
<p>为此，我做了进一步的实验，用谷歌浏览器分别请求本地局域网和公网ip查看资源加载的情况。</p>
<p>1、公网IP<br><img src="https://raw.githubusercontent.com/FantasticLBP/iOSKonwledge-Kit/master/assets/屏幕快照%202017-09-15%20下午5.56.28.png" alt=""></p>
<p>2、本地局域网</p>
<p><img src="https://raw.githubusercontent.com/FantasticLBP/iOSKonwledge-Kit/master/assets/屏幕快照%202017-09-15%20下午6.27.16.png" alt=""></p>
<p>关键词Status Code</p>
<p>结论：从图上可以看出本地局域网不管首次加载还是刷新都是直接请求；而通过局域网的方式请求：首次请求是从服务器上获取，在此刷新的时候是从（from memory cache）中获取的。</p>
<h4 id="猜想"><a href="#猜想" class="headerlink" title="猜想"></a>猜想</h4><p>局域网 的方式网速都比较快所以不会缓存；</p>
<p>公网IP的方式可能由于网速问题会将首次请求到的资源缓存下来。</p>
<p>所以确定缓存存在了，那么如何避免缓存？</p>
<ul>
<li>App在启动后请求一个接口，这个接口的目的是获取当前H5资源的版本号</li>
<li>将获得的版本号保存下来（App本地保存）</li>
<li>由于UIWebView上加载网页，发起网络请求都可以通过一个代理方法所拦截，所以我们可以在这个代理方法中判断url的参数，可能是<a href="http://www.a.com/login、http://www.a.com/login.html、http://www.a.com/login.html?name=geek、http://www.a.com/login#readme等等，所以我们判断过url后考虑如何将版本号加到url里面" target="_blank" rel="external">http://www.a.com/login、http://www.a.com/login.html、http://www.a.com/login.html?name=geek、http://www.a.com/login#readme等等，所以我们判断过url后考虑如何将版本号加到url里面</a></li>
<li>由于我们的App使用了不同模块的UIWebView，但是都是在UIWebView上需要大量的JS交互，所以使用了WebViewJavascriptBridge这个库。UIWebView本身的代理方法不会执行，所以修改这个库里面的WebViewJavascriptBridge.m文件的代码，差不多是下面的方式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType &#123;</div><div class="line">    if (webView != _webView) &#123; return YES; &#125;</div><div class="line">    NSURL *url = [rntity Tag 的资源直接访问equest URL];</div><div class="line">    if ([request.URL.absoluteString containsString:@&quot;http&quot;] || [request.URL.absoluteString containsString:@&quot;https&quot;]) &#123;</div><div class="line">        if ([request.URL.absoluteString containsString:@&quot;?&quot;]) &#123;</div><div class="line">            url = [NSURL URLWithString:[NSString stringWithFormat:@&quot;%@&amp;h5V=%@&quot;,request.URL.absoluteString,[ProjectUtil getH5VersionString]]];</div><div class="line">        &#125;else&#123;</div><div class="line">            url = [NSURL URLWithString:[NSString stringWithFormat:@&quot;%@?h5V=%@&quot;,request.URL.absoluteString,[ProjectUtil getH5VersionString]]];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    LBPLOG(@&quot;url-&gt;%@&quot;,[url absoluteString]);</div><div class="line">    __strong WVJB_WEBVIEW_DELEGATE_TYPE* strongDelegate = _webViewDelegate;</div><div class="line">    if ([_base isCorrectProcotocolScheme:url]) &#123;</div><div class="line">        if ([_base isBridgeLoadedURL:url]) &#123;</div><div class="line">            [_base injectJavascriptFile];</div><div class="line">        &#125; else if ([_base isQueueMessageURL:url]) &#123;</div><div class="line">            NSString *messageQueueString = [self _evaluateJavascript:[_base webViewJavascriptFetchQueyCommand]];</div><div class="line">            [_base flushMessageQueue:messageQueueString];</div><div class="line">        &#125; else &#123;</div><div class="line">            [_base logUnkownMessage:url];</div><div class="line">        &#125;</div><div class="line">        return NO;</div><div class="line">    &#125; else if (strongDelegate &amp;&amp; [strongDelegate respondsToSelector:@selector(webView:shouldStartLoadWithRequest:navigationType:)]) &#123;</div><div class="line">        return [strongDelegate webView:webView shouldStartLoadWithRequest:request navigationType:navigationType];</div><div class="line">    &#125; else &#123;</div><div class="line">        return YES;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>总结：</p>
<p>App的缓存问题暂时研究到这里，后期会继续研究其他方面的问题</p>
<h1 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h1><p>通过浏览器我们知道有的缓存是200 OK（from cache ），有的缓存是304 Not modified。如果运维移除了Entity Tag就一直是200（from cache）。如果没有移除的话2者是交替出现的。</p>
<p>为什么2者会有区别？</p>
<ul>
<li>200 OK（from cache）是直接点击链接或者在浏览器地址栏中输入网址敲回车键的结果</li>
<li>而304 modified是我们刷新了浏览器页面时触发或者设置了长缓存、但Entity Tags没有移除时触发</li>
</ul>
<p>做了 实验得出结论：</p>
<ul>
<li><p>直接访问有缓存的网站都触发 200 OK (from cache)</p>
</li>
<li><p>刷新浏览器则会触发304</p>
</li>
<li><p>同一域名下，没有 Entity Tag 的资源直接访问，是 200 OK (from cache) 的结果</p>
</li>
<li><p>同一域名下，有Entity Tag 的资源直接访问，是出现304 Not Modified</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/10/URL-Schemes深度剖析（上）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杭城小刘">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杭城小刘">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/10/URL-Schemes深度剖析（上）/" itemprop="url">URL-Schemes深度剖析（上）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-10T14:04:27+08:00">
                2017-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###自定义URL Schemes###</p>
<p>1、引言</p>
<p>URL Schemes 应用在 iOS 上已经很久了。对于使用者来说，在沙盒机制下的 iOS 中，如果想做到一定程度上的自动化就不可避免地要用到 URL Schemes。但因为 URL Schemes 的使用方式不像传统 iOS 使用者接触到的图形界面那样可以直观地点来点去，造成了对它有兴趣的人（尤其是对英文有恐惧的人）一定程度上理解的困难。</p>
<p>2、简介苹果的沙盒机制</p>
<p>苹果选择沙盒来保障用户的隐私和安全，但沙盒也阻碍了应用间合理的信息共享，于是有了 URL Schemes 这个解决办法。</p>
<p>一般来说，我们使用的智能设备上有许多我们的个人信息。比如：联系方式、银行卡/信用卡信息、支付宝/Paypal/各大商城的账户密码、照片甚至行程与位置信息等。</p>
<p>如果说，你设备上的每一个应用，不管是官方的还是你从任何商城安装的应用都可以随意地获取这些信息，那么你轻则收到骚扰信息和邮件、重则后果不堪设想。如何让这些信息不被其它应用随意使用，或者说，如何让这些信息仅在设备所有者本人知情并允许的情况下被使用，是所有智能设备与操作系统所要在乎的核心安全问题。</p>
<p>在 iOS 这个操作系统中，针对这个问题，苹果使用了名为「沙盒」的机制：应用只能访问它声明可能访问的资源。一切提交到 App Store 的应用都必须遵守这个机制。</p>
<p>在安全方面沙盒是个很好的解决办法，但是有些矫枉过正。敏感的个人信息我们不愿意透露，却不代表所有的信息我们都不想与其它应用共享。</p>
<p>比如说我们要一次性地（没错，只按一次）把多个事件放到日历中，这些事件包含日期时间以及持续时间等信息，如果 App 之间信息不能沟通，就无法做到这点。（在下文中的 x-callback-URL 的部分会详述整个过程）</p>
<p>类似于一次性添加多个日历事件这样的，我们在使用智能设备的过程中会遇到很多不必要的重复的步骤。大多数人对这些重复的步骤是不自觉的，就像当自己电脑里有一批文件需要批量重命名的时候，他们机械地重复着重命名的过程。但是当我们掌握了这些设备运行的模式，或者有了一些工具，我们就能将这些重复的步骤全部节省下来。在 iOS 上，我们可以利用的工具就是 URL Schemes。</p>
<p>3、URL Schemes 是什么</p>
<p>Custom URL scheme 的好处就是，你可以在其它程序中通过这个url打开应用程序。如Ａ应用程序注册了一个url scheme:myApp, 那么就在mobile浏览器中就可以通过<a href="href=’myApp://’">href=’myApp://’</a>打开你的应用程序Ａ。</p>
<p>对比网页url就比较好理解url scheme。给出一个url “<a href="http://bxu2359670321.my3w.com/view/login.php”，它的格式：protocol" target="_blank" rel="external">http://bxu2359670321.my3w.com/view/login.php”，它的格式：protocol</a> :// hostname[:port] / path / [;parameters][?query]#fragment。<br>因此这个url的protocol就是http。对比URL Scheme，给出例子“weixin://dl/moments“，前面的weixin:就代表微信的scheme。你可以完全按照理解一个网页的 URL ——也就是它的网址——的方式来理解一个 iOS 应用的 URL。即Scheme是<strong>://</strong>之前的那段字符</p>
<p>###注意###</p>
<p>1、所有的网页都有url；但未必所有的应用都有自己的 URL Schemes，更不是每个应用的每个功能都有相应的 URL Schemes</p>
<p>2、一个网址只对应一个网页，但并非每个 URL Schemes 都只对应一款应用。这点是因为苹果没有对 URL Schemes 有不允许重复的硬性要求</p>
<p>3、一般网页的 URL 比较好预测，而 iOS 上的 URL Schemes 因为没有统一标准，所以非常难猜，通过猜来获取 iOS 应用的 URL Schemes 是不现实的。（我推荐将Bundle identifier反转） </p>
<p>###上干货###</p>
<p>1、注册自定义 URL Scheme</p>
<p>1）注册自定义 URL Scheme 的第一步是创建 URL Scheme — 在 Xcode Project Navigator 中找到并点击工程 info.plist 文件。当该文件显示在右边窗口，在列表上点击鼠标右键，选择 Add Row:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2287777-e22f24acf7823cfa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="url scheme1.png"></p>
<p>2）点击左边剪头打开列表，可以看到 Item 0，一个字典实体。展开 Item 0，可以看到 URL Identifier，一个字符串对象。该字符串是你自定义的 URL scheme 的名字。建议采用反转Bundle idenmtifier的方法保证该名字的唯一性</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2287777-67f09fb472c6b87d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="url scheme2.png"></p>
<p>3）点击 Item 0 新增一行，从下拉列表中选择 URL Schemes，敲击键盘回车键完成插入。（注意 URL Schemes 是一个数组，允许应用定义多个 URL schemes。）展开该数据并点击 Item 0。你将在这里定义自定义 URL scheme 的名字。只需要名字，不要在后面追加 ://</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2287777-b9c1d5245529fa1b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="url scheme3.png"></p>
<p>2、拿浏览器坐简单验证</p>
<p>在地址栏中熟入自定的url scheme。此时必须保证该浏览器所在设备上已经安装了具有自定义url scheme的App。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2287777-93cc952da314d7bf.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="IMG_5739.PNG"></p>
<p>3、新建Xcode工程，做个App试试看，这里我就放一个Button，点击打开url<br>代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- (IBAction)open:(id)sender &#123;</div><div class="line">    NSString *url = @&quot;zhunaer://?name=lbp&amp;age=22&quot;;</div><div class="line">    if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:url]]) &#123;</div><div class="line">           [[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]];</div><div class="line">    &#125;else&#123;</div><div class="line">        NSLog(@&quot;打不开&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>结果打不开，为什么？<br>因为在新建App的plist中没加query schemes</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;key&gt;LSApplicationQueriesSchemes&lt;/key&gt;</div><div class="line">&lt;array&gt;</div><div class="line">&lt;string&gt;zhunaer&lt;/string&gt;</div><div class="line">&lt;/array&gt;</div></pre></td></tr></table></figure>
<p>4、如果需要在2个App之间传值，怎么办？可以用URL Scheme解决。</p>
<p>在被打开的App的Appdelegate.m中实现-(BOOL)application:(UIApplication <em>)application openURL:(nonnull NSURL </em>)url sourceApplication:(nullable NSString *)sourceApplication annotation:(nonnull id)annotation；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">-(BOOL)application:(UIApplication *)application openURL:(nonnull NSURL *)url sourceApplication:(nullable NSString *)sourceApplication annotation:(nonnull id)annotation&#123;</div><div class="line">    NSLog(@&quot;calling application bundle id: %@&quot;,sourceApplication);</div><div class="line">    NSLog(@&quot;url shceme:%@&quot;,[url scheme]);</div><div class="line">    NSLog(@&quot;参数:%@&quot;,[url query]);</div><div class="line">    if ([sourceApplication isEqualToString:@&quot;com.geek.test1&quot;]) &#123;</div><div class="line">        return YES;</div><div class="line">    &#125;</div><div class="line">    return NO;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在需要打开第三方App的点击事件处的url处后面加上参数，类似NSString *url = @”zhunaer://?name=lbp&amp;age=22”;</p>
<p>注意：在URL Scheme后加?然后跟网页的url的参数一样写法。</p>
<p>5、如何判断是指定App打开，或者某些App不让打开我们的App？<br>做了实验。</p>
<p>A：在需要打开第三方App的工程中将Bundle identifier改为“com.geek.test2”,其余不变</p>
<p>B：在被打开的App的AppDelegate.m中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">-(BOOL)application:(UIApplication *)application openURL:(nonnull NSURL *)url sourceApplication:(nullable NSString *)sourceApplication annotation:(nonnull id)annotation&#123;</div><div class="line">    NSLog(@&quot;calling application bundle id: %@&quot;,sourceApplication);</div><div class="line">    NSLog(@&quot;url shceme:%@&quot;,[url scheme]);</div><div class="line">    NSLog(@&quot;参数:%@&quot;,[url query]);</div><div class="line">    if ([sourceApplication isEqualToString:@&quot;com.geek.test1&quot;]) &#123;</div><div class="line">        return YES;</div><div class="line">    &#125;</div><div class="line">    return NO;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2287777-5ddf86e7d30b1c05.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Simulator Screen Shot 2017年5月1日 下午2.48.21.png"></p>
<p>###实验结果###</p>
<p>依旧可以打开App，即使断点走入Return NO</p>
<p>结论：如果你想阻止其它应用调用你的应用，<strong>创建一个与众不同的 URL scheme</strong>。尽管这不能保证你的应用不会被调用，但至少大大降低了这种可能性。</p>
<p>参考：<a href="https://sspai.com/post/31500#01" target="_blank" rel="external">https://sspai.com/post/31500#01</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/10/iOS程序员利用分页和模糊查询技术实现一个App接口/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杭城小刘">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杭城小刘">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/10/iOS程序员利用分页和模糊查询技术实现一个App接口/" itemprop="url">iOS程序员利用分页和模糊查询技术实现一个App接口</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-10T14:04:27+08:00">
                2017-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>摘要: 模糊查询技术、分页技术、App接口</p>
<p>1、分页问题</p>
<pre><code>关键技术点：php执行sql语句。示例：“SELECT * FROM hotel WHERE subject=&apos;10&apos; and address like &apos;%杭州%&apos; LIMIT 0,4”。注意：LIMIT后需要跟2个数字，1个是起始位置，2是结束位置。
</code></pre><p>   可以对limit函数进行封装：select <em>from user limit (page-1)</em>size,page*size;</p>
<pre><code>单例模式编写App接口的注意点：

（1）、php后台获取参数，之后根据参数转换成SQL语句；

（2）、php执行SQL语句，将结果转换成JSON，返回给客户端
</code></pre><p>2、模糊搜索</p>
<pre><code>SQL匹配模式（开发中应用最多的一种）：
</code></pre><p>   （1）、使用SQL匹配模式，不能使用操作符 = 或 != ，而是使用操作符LIKE或者NOT LIKE</p>
<p>   （2）、使用SQL匹配模式，MySQL提供了2种通配符。</p>
<pre><code>%:表示任意数量的任意字符（包括0个）

_:表示任意的单个字符

例子：u_name为“张三”，“张猫三”、“三脚猫”，“唐三藏”。如果要找回包含“三”和“猫”的纪录

     “select *from user where u_name LIKE &apos;%三%&apos; and u_name LIKE &apos;%猫%&apos;;

     若使用“select *from user where u_name LIKE &apos;%三%猫%&apos;;”只能找出：三脚猫
</code></pre><p>   （3）、使用SQL匹配模式，如果匹配格式当中不包含以上2种通配符中的任意1个，其查询效果等同于= 或 !=</p>
<p>   （4）、使用SQL匹配模式，默认情况下是不区分大小写的</p>
<p>   正则表达式匹配模式（不推荐）：</p>
<pre><code>（1）、 []:表示括号内所列字符中的一个：指定一个字符、字符串或范围，要求所匹配对象为它们中的任意一个

    比如 SELECT * FROM [user] WHERE u_name LIKE &apos;[张李王]三&apos;。将找出“张三”、“李三”、“王三”（而不是“张李王三”）；

    比如[ ] 内有一系列字符（01234、abcde之类的）则可略写为“0-4”、“a-e”。SELECT * FROM [user] WHERE u_name LIKE &apos;老[1-9]&apos;-&gt; 将找出“老1”、“老2”、……、“老9”；

（2）、[^]:表示不在括号所列之内的单个字符。其取值和[]相同，要求匹配对象为指定字符以外的任意一个字符

  比如 SELECT * FROM [user] WHERE u_name LIKE &apos;[^张李王]三&apos;。将找出不姓“张”、“李”、“王”的“赵三”、“孙三”等
</code></pre><p>  （3）、.:匹配任意的单个字符</p>
<p>   （4）、^:表示以某个字符或字符串开头。^a:以a开头</p>
<p>   （5）、$:表示以某个字符或字符串结尾。s$:以s结尾</p>
<p>   （6）、*:匹配0个或多个在它前面的字符</p>
<p>使用正则表达式匹配的操作符是：REGEXP和NOT REGEXP（RLIKE或NOT RLIKE）</p>
<p>注意啊：正则表达式和SQl匹配模式工作原理不一样：正则只要匹配出符合条件就马上算成功；而SQl需要严格匹配。比如同样需要写从酒店表中拿出地址中包含“杭州”的酒店</p>
<p>SQL:SELECT *FROM hotel WHERE address LIKE ‘%杭州%’;</p>
<p>正则：SELECT <em>FROM hotel WHERE address REGEXP ‘^[杭][州]</em>’;</p>
<p>需要特别注意的是：如果所查询的内容包含通配符时，导致我们查询”%”,”_”,”[“的语句无法正常实现。因此我们需要特殊处理。</p>
<p>需要特别注意的是：如果所查询的内容包含通配符时，导致我们查询”%”,”_”,”[“的语句无法正常实现。因此我们需要特殊处理。</p>
<pre><code>function sql_encode($sql){
  $sql = replace($sql,&quot;[&quot;,&quot;[[]&quot;);
  $sql = replace($sql,&quot;%&quot;,&quot;[%]&quot;);
  $sql = replace($sql,&quot;_&quot;,&quot;[_]&quot;);
  return $sql;
}
</code></pre><p>最后贴一个利用模糊查询实现分页查询的接口。</p>
<pre><code>&lt;?php
/**
 * Created by PhpStorm.
 * User: geek
 * Date: 2017/2/20
 * Time: 上午9:15
 */

header(&apos;content-type:text.html;charset=utf-8&apos;);
error_reporting(0);
require_once &apos;../../model/PdoMySQL.class.php&apos;;
require_once &apos;../../model/config.php&apos;;
require_once &apos;Response.php&apos;;


class HotelList
{
    private $tableName = &quot;hotel&quot;;
    private $telephone = &quot;&quot;;
    private $cityName= &quot;&quot;;
    private $subjectId = &quot;&quot;;
    private $page = 0;
    private $size = 0;



    protected static $_instance = null;

    protected function  __construct()
    {

    }

    protected function  __clone()
    {
        // TODO: Implement __clone() method.
    }


    public function  getInstance()
    {
        if (self::$_instance === null) {
            self::$_instance = new self();
        }
        return self::$_instance;
    }

    function getHotels()
    {
        self.$this-&gt;telephone = $_REQUEST[&quot;telephone&quot;];
        self.$this-&gt;subjectId = $_REQUEST[&quot;subjectId&quot;];
        self.$this-&gt;cityName = $_REQUEST[&quot;cityName&quot;];
        self.$this-&gt;page = $_REQUEST[&quot;page&quot;];
        self.$this-&gt;size = $_REQUEST[&quot;size&quot;];

        $mysqlPdo = new PdoMySQL();

        if($this-&gt;telephone == &quot;&quot;){
            Response::show(201,&quot;fail&quot;,&quot;非安全的数据请求&quot;,&quot;json&quot;);
        }
        $userRows = $mysqlPdo-&gt;find(&quot;user&quot;,&quot;telephone=&apos;$this-              &gt;telephone&apos;&quot;);
        if($userRows[0][&quot;telephone&quot;] != $this-&gt;telephone){
            Response::show(201,&quot;fail&quot;,&quot;非安全的数据请求&quot;,&quot;json&quot;);
        }
        $city = str_replace(&quot;市&quot;,&quot;&quot;,$this-&gt;cityName);
        $allrows = $mysqlPdo-&gt;find($this-&gt;tableName,&quot;subject=&apos;$this-&gt;subjectId&apos; and address like &apos;%$city%&apos;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,[(intval($this-&gt;page)-1)*intval($this-&gt;size),intval($this-&gt;page)*intval($this-&gt;size)]);
        Response::show(200,&apos;酒店列表获取成功&apos;,$allrows,&apos;json&apos;);

    }
}

$lister = HotelList::getInstance();
$lister-&gt;getHotels();
</code></pre><p>其中：Respone和PdoMySQL的2个类分别是接口数据展示的类和PDO操作的一个封装。</p>
<p>如果有需要请留下邮箱。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/10/popstate事件在webkit中的诡异行为/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杭城小刘">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杭城小刘">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/10/popstate事件在webkit中的诡异行为/" itemprop="url">popstate事件在webkit中的诡异行为</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-10T14:04:27+08:00">
                2017-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1、背景：同事去学校做毕设请假，今天帮他修改h5bug<br>2、遇到的问题：移动端App打开某个网页会自动弹出一个对话框，这个对话框出现的不合时宜，因为需要是在页面做一些操作后点击原生顶部的返回按钮再弹出对话框<br>3、具体问题就是<strong>popstate</strong>造成的</p>
<p>4、原来的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">window.addEventListener(&apos;popstate&apos;, function() &#123;</div><div class="line">var btnArray = [&apos;我要退出&apos;, &apos;继续计数&apos;];</div><div class="line">mui.confirm(&apos;正在计数哦，确定要退出吗？&apos;, &apos;提示&apos;, btnArray, function(e) &#123;</div><div class="line">if(e.index == 1) &#123;</div><div class="line">pushHistory();</div><div class="line">&#125; else &#123;</div><div class="line">setBack();</div><div class="line">&#125;</div><div class="line">&#125;)</div><div class="line">&#125;,false);</div></pre></td></tr></table></figure>
<p>5、修改后的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">window.addEventListener(&apos;load&apos;, function() &#123;</div><div class="line">setTimeout(function() &#123;</div><div class="line">window.addEventListener(&apos;popstate&apos;, function() &#123;</div><div class="line">var btnArray = [&apos;我要退出&apos;, &apos;继续计数&apos;];</div><div class="line">mui.confirm(&apos;正在计数哦，确定要退出吗？&apos;, &apos;提示&apos;, btnArray, function(e) &#123;</div><div class="line">if(e.index == 1) &#123;</div><div class="line">pushHistory();</div><div class="line">&#125; else &#123;</div><div class="line">setBack();</div><div class="line">&#125;</div><div class="line">&#125;)</div><div class="line">&#125;);</div><div class="line">&#125;, 0);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>6、暂且先解决问题，日后有时间继续深入研究</p>
<p>研究一阵</p>
<p>7、说说过去</p>
<p>以前浏览器操作浏览器历史记录主要依据history对象。在它的<em>proto</em>继承有back、forward、go等函数，那么什么是popState？<strong>简而言之就是HTML5新增的用来控制浏览器历史记录的api。</strong></p>
<p>8、怎么用？</p>
<p>HTML5的新API扩展了window.history，使历史记录点更加开放了。可以存储当前历史记录点pushState、替换当前历史记录点replaceState、监听历史记录点popstate。</p>
<p>history.pushState(data,title,url);<br>//其中第一个参数data是给state的值；第二个参数title为页面的标题，但当前所有浏览器都忽略这个参数，传个空字符串就好；第三个参数url是你想要去的链接；</p>
<p>replaceState用法类似，例如：history.replaceState(“首页”,””,location.href+ “#web”);</p>
<p>两者区别：pushState会改变history.length，而replaceState不改变history.length</p>
<p>9、有坑吗？</p>
<p>popstate事件在webkit中的很诡异。popstate是HTML5的History系列中的事件，但是这玩意儿在webkit中的行为相当让人蛋疼。这回连IE10都站在了Firefox这边，至少这边的实用性强的多。虽然官方的文档中对popstate的描述也没有细节上的描述，不过以我的逻辑来判断，这货是就webkit的BUG。</p>
<p>Html5这套ApI和传统的history不同，或者说这套API是“session history entries”。</p>
<p>注意注意：Html5种的HistoryAPI是不会使页面跳转的，只是操作地址栏和相应的state属性而已，而且它是手动操作的。浏览器默认的History还是传统的那一套，虽然它们在浏览器上都使用同一个“历史记录堆栈”。</p>
<p>对这个差异的认知就是webkit中诡异行为的原因。webkit并没有把HTML5的History和传统的区分开，而根据官方文档对popstate的描述，只要访问历史记录就会触发popstate。而传统的History中访问页面和生产历史记录是同时的。所以在webkit中，无论是刷新还是访问一个新网页都会触发popstate。而其它浏览器中这个popstate仅作用于HTML5的History，并不响应传统的History，更不用说刷新和访问新网页的情况了。</p>
<p>原因找到了，那么解决方案呢？</p>
<p>1、对popstate延迟绑定的方法，因为popstate会在页面加载完成之后不久触发，所以在setTimeout一段时间后再绑定事件，popstate的第一次就不会轻易被webkit夺走了<br>2、判断浏览器再做调整，直接针对webkit在页面加载完成后第一次触发的popstate屏蔽了</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/10/外卖App双列表联动/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杭城小刘">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杭城小刘">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/10/外卖App双列表联动/" itemprop="url">外卖App双列表联动</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-10T14:04:27+08:00">
                2017-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="双列表联动"><a href="#双列表联动" class="headerlink" title="双列表联动"></a>双列表联动</h3><blockquote>
<p>用过了那么多的外卖App，总结出一个规律，那就是“所有的外卖App都有双列表联动功能”。哈哈哈哈，这是一个玩笑。</p>
<p>这次我也需要开发具有联动效果的双列表。也是首次开发这种类型的UI，记录下步骤与心得</p>
</blockquote>
<h4 id="一、关键思路"><a href="#一、关键思路" class="headerlink" title="一、关键思路"></a>一、关键思路</h4><ul>
<li>懒加载左右2个UITableView</li>
<li>根据需要自定义Cell</li>
<li>2个UITableView加载到界面上的时候注意下部剧就好</li>
<li>因为需要联动效果，所有左侧的UITableView一般是大的分类，右边的UITableView一般是大分类小的小分类，所以有了这样的特点<ul>
<li>左边的UITableView是只有1个section和n个row</li>
<li>右边的UITableView具有n个section（这里的section 个数恰好是左边UITableView的row数量），且每个section下的row由对应的数据源控制</li>
</ul>
</li>
</ul>
<h4 id="二、第一版代码"><a href="#二、第一版代码" class="headerlink" title="二、第一版代码"></a>二、第一版代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">#pragma mark -- UITableViewDelegate</div><div class="line">-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView&#123;</div><div class="line">    if (tableView == self.leftTablview) &#123;</div><div class="line">        return 1;</div><div class="line">    &#125;</div><div class="line">    return self.datas.count;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section&#123;</div><div class="line">    if (tableView == self.leftTablview) &#123;</div><div class="line">        return self.datas.count;</div><div class="line">    &#125;</div><div class="line">    QuestionCollectionModel *model = self.datas[section];</div><div class="line">    NSArray *questions =model.questions;</div><div class="line">    return questions.count;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath&#123;</div><div class="line">    if (tableView == self.leftTablview) &#123;</div><div class="line">        return LeftCellHeight;</div><div class="line">    &#125;</div><div class="line">    return RightCellHeight;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123;</div><div class="line">    if (tableView == self.leftTablview) &#123;</div><div class="line">        PregnancyPeriodCell *cell = [tableView dequeueReusableCellWithIdentifier:PregnancyPeriodCellID forIndexPath:indexPath];</div><div class="line">        if (self.collectionType == CollectionType_Wrong || self.collectionType == CollectionType_Miss) &#123;</div><div class="line">            QuestionCollectionModel *model = self.datas[indexPath.row];</div><div class="line">            cell.week = model.tag;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return cell;</div><div class="line">    &#125;</div><div class="line">    QuestionCell *cell = [tableView dequeueReusableCellWithIdentifier:QuestionCellID forIndexPath:indexPath];</div><div class="line">    QuestionCollectionModel *model = self.datas[indexPath.section];</div><div class="line">    NSArray *questions =model.questions;</div><div class="line">    QuestionModel *questionModel = questions[indexPath.row];</div><div class="line">    cell.model = questionModel;</div><div class="line">    return cell;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath&#123;</div><div class="line">    if (tableView == self.leftTablview) &#123;</div><div class="line">        NSIndexPath *indexpath = [NSIndexPath indexPathForRow:0 inSection:indexPath.row];</div><div class="line">        [self.rightTableview scrollToRowAtIndexPath:indexpath atScrollPosition:UITableViewScrollPositionTop animated:YES];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)scrollViewDidScroll:(UIScrollView *)scrollView&#123;</div><div class="line">    if (scrollView == self.rightTableview) &#123;</div><div class="line">        NSIndexPath *indexpath = [self.rightTableview indexPathsForVisibleRows].firstObject;</div><div class="line">        NSIndexPath *leftScrollIndexpath = [NSIndexPath indexPathForRow:indexpath.section inSection:0];</div><div class="line">        [self.leftTablview selectRowAtIndexPath:leftScrollIndexpath animated:YES scrollPosition:UITableViewScrollPositionMiddle];</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>缺陷：虽然实现了效果，但是有缺陷。点击左侧的UITableView，右侧的UITableViewe滚动到相应的位置，这是没问题的，但是滚动</p>
<p>右边，需要根据右边indexPath.section将选中左侧相应的indexPath。这样左侧选中的时候，又会触发右边滚动的事件，整体看上去不是很流畅。</p>
<h4 id="三、解决方案"><a href="#三、解决方案" class="headerlink" title="三、解决方案"></a>三、解决方案</h4><p>观察了下，发现右侧滚动的时候左侧会上下选中，所以也就是只要让右侧滚动的时候，左侧的UITableView单方向选中，不要滚动就好，所以由于UITableView也是UIScrollview，所以在scrollViewDidScroll方法中判断右侧的UITableView是向上还是向下滚动，以此作为判断条件来让左侧的UITableView选中相应的行。</p>
<p>且之前是在scrollview代理方法中让左侧的tableview选中，这样子又会触发左侧tableview的选中事件，从而导致右侧的tablview滚动，造成不严谨的联动逻辑</p>
<p>改进后的方法：</p>
<ol>
<li><p>点击左侧的UITableView，在代理方法didSelectRowAtIndexPath中拿到相应的indexPath.row，计算出右侧UITableView需要滚动的indexPath的位置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[self.rightTableview scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:indexPath.row] atScrollPosition:UITableViewScrollPositionTop animated:YES];</div></pre></td></tr></table></figure>
</li>
<li><p>在willDisplayCell和didEndDisplayingCell代理方法中选中左侧UITableView相应的行。</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath&#123;</div><div class="line"></div><div class="line">    if (tableView == self.rightTableview  &amp;&amp; !self.isScrollDown &amp;&amp; self.rightTableview.isDragging ) &#123;</div><div class="line">        [self.leftTablview selectRowAtIndexPath:[NSIndexPath indexPathForRow:indexPath.section inSection:0] animated:YES scrollPosition:UITableViewScrollPositionTop];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">-(void)tableView:(UITableView *)tableView didEndDisplayingCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath&#123;</div><div class="line">    if (tableView == self.rightTableview &amp;&amp; self.isScrollDown &amp;&amp; self.rightTableview.isDragging) &#123;</div><div class="line">        [self.leftTablview selectRowAtIndexPath:[NSIndexPath indexPathForRow:indexPath.section+1 inSection:0] animated:YES scrollPosition:UITableViewScrollPositionTop];</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(nonnull NSIndexPath *)indexPath</div><div class="line">&#123;</div><div class="line">    if (self.leftTablview == tableView)</div><div class="line">    &#123;</div><div class="line">        [self.rightTableview scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:indexPath.row] atScrollPosition:UITableViewScrollPositionTop animated:YES];</div><div class="line">    &#125;else&#123;</div><div class="line">        NSLog(@&quot;嗡嗡嗡&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">#pragma mark - UIScrollViewDelegate</div><div class="line"></div><div class="line">- (void)scrollViewDidScroll:(UIScrollView *)scrollView&#123;</div><div class="line"></div><div class="line">    static CGFloat lastOffsetY = 0;</div><div class="line"></div><div class="line">    UITableView *tableView = (UITableView *)scrollView;</div><div class="line">    if (self.rightTableview == tableView)&#123;</div><div class="line">        self.isScrollDown = (lastOffsetY &lt; scrollView.contentOffset.y);</div><div class="line">        lastOffsetY = scrollView.contentOffset.y;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h5><p> <img src="https://raw.githubusercontent.com/FantasticLBP/iOSKonwledge-Kit/master/assets/2017-09-24%2015_35_52.gif" alt="效果图" title="效果图"></p>
<p>附上Demo：<a href="https://github.com/FantasticLBP/BlogDemos" target="_blank" rel="external">Demo</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/10/在内存剖析对象/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杭城小刘">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杭城小刘">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/10/在内存剖析对象/" itemprop="url">在内存剖析对象</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-10T14:04:27+08:00">
                2017-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="对象在内存中的存储"><a href="#对象在内存中的存储" class="headerlink" title="对象在内存中的存储"></a>对象在内存中的存储</h1><ul>
<li><p>栈、堆、BSS、数据段、代码段是什么？</p>
<ul>
<li><p>栈（stack）：又称作堆栈，用来存储程序的局部变量（但不包括static声明的变量，static修饰的数据存放于数据段中）。除此之外，在函数被调用时，栈用来传递参数和返回值。</p>
</li>
<li><p>堆（heap）：用于存储程序运行中被动态分配的内存段，它的大小并不固定，可动态的扩张和缩减。操作函数(malloc／free)</p>
</li>
<li><p>BSS段（bss segment）：通常用来存储程序中未被初始化的全局变量和静态变量的一块内存区域。BSS是英文Block Started by Symbol的简称。BSS段输入静态内存分配</p>
</li>
<li><p>数据段（data segment）：通常用来存储程序中已被初始化的全局变量和静态变量和字符串的一块内存区域</p>
</li>
<li><p>代码段（code segment）：通常是指用来存储程序可执行代码的一块内存区域。这部分区域的大小在程序运行前就已经确定，并且内存区域通常属于只读，某些架构也允许代码段为可写，即允许修改程序。在代码段中，也有可能包含一些只读的常数变量，例如字符串常量。</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/FantasticLBP/iOSKonwledge-Kit/master/assets/内存.png" alt="内存" title="内存"></p>
<ul>
<li><h5 id="搞清楚上面的概念再来研究下对象在内存中如何存储？"><a href="#搞清楚上面的概念再来研究下对象在内存中如何存储？" class="headerlink" title="搞清楚上面的概念再来研究下对象在内存中如何存储？"></a>搞清楚上面的概念再来研究下对象在内存中如何存储？</h5></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Person *p1 = [Person new]</div></pre></td></tr></table></figure>
<p>看这行代码，先来看几个注意点：</p>
<ul>
<li><p>new底层做的事情：</p>
<ul>
<li><p>在堆内存中申请1块合适大小的空间</p>
</li>
<li><p>在这块内存上根据类模版创建对象。类模版中定义了什么属性就依次把这些属性声明在对象中；对象中还存在一个属性叫做<strong>isa</strong>，是一个指针，指向对象所属的类在代码段中地址</p>
</li>
<li><p>初始化对象的属性。这里初始化有几个原则：a、如果属性的数据类型是基本数据类型则赋值为0；b、如果属性的数据类型是C语言的指针类型则赋值为NULL；c、如果属性的数据类型为OC的指针类型则赋值为nil。</p>
</li>
<li><p>返回堆空间上对象的地址</p>
</li>
</ul>
</li>
<li><p>注意</p>
<ul>
<li><p>对象只有属性，没有方法。包括类本身的属性和一个指向代码段中的类isa指针</p>
</li>
<li><p>如何访问对象的属性？指针名-&gt;属性名；本质：根据指针名找到指针指向的对象，再根据属性名查找来访问对象的属性值</p>
</li>
<li><p>如何调用方法？[指针名 方法];本质：根据指针名找到指针指向的对象，再发现对象需要调用方法，再通过对象的isa指针找到代码段中的类，再调用类里面方法</p>
</li>
</ul>
</li>
<li><p>为什么不把方法存储在对象中？</p>
<ul>
<li><p>因为以类为模版创建的对象只有属性可能不相同，而方法相同，如果堆区的对象里面也保存方法的话就会很重复，浪费了堆空间，因此将方法存储与代码段</p>
</li>
<li><p>所以一个类创建的n个对象的isa指针的地址值都相同，都指向代码段中的类地址</p>
</li>
</ul>
</li>
</ul>
<p><strong>做个小实验</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line">@interface Person : NSObject&#123;</div><div class="line">    @public</div><div class="line">    int _age;</div><div class="line">    NSString *_name;</div><div class="line">    int *p;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)sayHi;</div><div class="line">@end</div><div class="line"></div><div class="line">@implementation Person</div><div class="line"></div><div class="line">-(void)sayHi&#123;</div><div class="line">    NSLog(@&quot;Hi, %@&quot;,_name);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">int main(int argc, const char * argv[]) &#123;</div><div class="line">    Person *p1 = [Person new];</div><div class="line">    Person *p2 = [Person new];</div><div class="line">    Person *p3 = [Person new];</div><div class="line">    p1-&gt;_age = 20;</div><div class="line">    p2-&gt;_age = 20;</div><div class="line"></div><div class="line">    [p1 sayHi];</div><div class="line">    [p2 sayHi];</div><div class="line">    [p3 sayHi];</div><div class="line"></div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Person  *p1 = [Person new];</div></pre></td></tr></table></figure>
<p><strong>这句代码在内存分配原理如下图所示</strong></p>
<p><img src="https://raw.githubusercontent.com/FantasticLBP/iOSKonwledge-Kit/master/assets/Untitled%20Diagram-2.png" alt="p1" title="p1"></p>
<p><strong>结论</strong></p>
<p><img src="https://raw.githubusercontent.com/FantasticLBP/iOSKonwledge-Kit/master/assets/屏幕快照%202017-05-15%20下午5.35.17.png" alt="p1" title="p1"></p>
<p><img src="https://raw.githubusercontent.com/FantasticLBP/iOSKonwledge-Kit/master/assets/屏幕快照%202017-05-15%20下午5.35.34.png" alt="p3" title="p3"></p>
<p><strong>可以 看到Person类的3个对象p1、p2、p3的isa的值相同。</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/10/1个月实现1个iOS客户端+后台服务端/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杭城小刘">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杭城小刘">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/10/1个月实现1个iOS客户端+后台服务端/" itemprop="url">1个月实现1个iOS客户端+后台服务端</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-10T14:04:27+08:00">
                2017-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Hotels"><a href="#Hotels" class="headerlink" title="Hotels"></a>Hotels</h1><p>住哪儿App</p>
<p><img src="https://github.com/FantasticLBP/Hotels/blob/master/住哪儿/Assets.xcassets/AppIcon.appiconset/11.png?raw=true" alt="AppLogo" title="这是App的Logo"></p>
<p><strong>实现了类似艺龙App的预定酒店功能，包括酒店搜索、特色酒店推荐、特惠酒店推荐等等功能，可以预定酒店、查看订单，唯独不能支付（支付功能必须由公司的名义注册，个人练手注册不了）。</strong></p>
<ul>包括iOS开发的常见功能：<br><li>自定义NavigationController实现全屏右滑返回上一控制器的LBPNavigationController</li><br><li>自定义UIScrollView实现全屏滑动显示不同控制器的LBPScrollSegmentView</li><br><li>封装网络访问类AFNetPackage，具备检查网络状态、JSON方式获取数据、xml方式获取数据、post、get、delete、文件下载、文件上传等功能</li><br><li>UITableview上拉加载、下面刷新功能;UITableView潜逃UICollecionView展现界面，事件、数据等通过Delegate处理</li><br><li>Masonry自动布局库的使用</li><br><li>封装好的启动欢迎页</li><br><li>个人信息持久化保存</li><br><li>复杂界面的布局纯代码实现</li><br><li>cell的重用内存优化</li><br><li>自定义URL Schemes便于其他App或者网页唤起；方便App或者网页传递参数</li><br><li>工程结构一幕了然，便于拓展</li><br><li>界面采用代码实现，部分界面采用xib实现。整个代码可读性比较好、代码规范、有注释说明，配合服务端是自己用php写的，Api也是php实现的。</li><br><li>主要功能：根据不同主题查找酒店、摇一摇随机推荐酒店、根据城市定位推荐酒店、根据用户输入多条件模糊搜索查找酒店、酒店位置地图显示、路径规划及其导航（百度地图、高德地图、系统地图）、订单查看等、酒店分享等功能</li><br></ul>


<h3>效果截图</h3>

<p><img src="https://raw.githubusercontent.com/FantasticLBP/Hotels/master/1.gif" alt="App效果图" title="这是App的效果图"></p>
<p>ToDo：后期可能会实现MVVM框架，将RAC技术应用到工程中去。一些容易变的页面采用Html5实现，比如”发现模块”的特色酒店。</p>

<h3>福利</h3>

<p></p><p>如果想了解服务端开发以及App与服务端交互（也就是接口开发）可以看看这个App的后台代码。 </p><p></p>
<h3>住哪儿App的后台管理功能，包括主题酒店、特色酒店发布、注册用户的统计查看、订单的统计查看、酒店的统计查看。Controller目录下的Api下就是给App开发的api。想写api的童鞋们可以看看。</h3><br><ul>包括php系统开发的常见功能：<br><li>复杂表单的提交，包括多图片上传</li><br><li>基于Bootstrap框架的界面布局</li><br><li>封装PDO数据库操作类，实现增删改查等等常见功能，调用简单</li><br><li>随机酒店推荐策略</li><br><li>多条件模糊搜索酒店算法</li><br><li>jquery表格插件Datatables的使用大大丰富了数据的展现方式，更具交互性。具有自动分页、模糊搜索等功能</li><br><li>封装了Response类，可以传递4个参数 show($code, $message = ‘’, $data = array(), $type = self::JSON)来展示json或者array或者xml。</li><br><li>工程结构一幕了然，便于拓展</li><br></ul><br><br><h3>效果截图</h3>

<p><img src="https://github.com/FantasticLBP/Hotels_Server/blob/master/Systemt_Screen1.png?raw=true" alt="系统截图" title="这是系统截图"></p>
<p>如果有不懂的地方可以加入QQ交流群讨论：515066271。这个QQ群讨论技术范围包括：iOS、H5混合开发、前端开发、PHP开发，欢迎大家讨论技术。</p>
<p>最后奉上项目地址，全部开源</p>
<p><a href="https://github.com/FantasticLBP/Hotels" target="_blank" rel="external">住哪儿App客户端</a></p>
<p><a href="https://github.com/FantasticLBP/Hotels_Server" target="_blank" rel="external">住哪儿后台服务端</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.JPG"
                alt="杭城小刘" />
            
              <p class="site-author-name" itemprop="name">杭城小刘</p>
              <p class="site-description motion-element" itemprop="description">iOS开发、web开发 | 95后 | 海贼王、龙珠 | 乒乓球 健身 | 杭州</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/FantasticLBP" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-globe"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://weibo.com/3194053975/profile?topnav=1&wvr=6" target="_blank" title="Weibo">
                    
                      <i class="fa fa-fw fa-globe"></i>Weibo</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">杭城小刘</span>

  
</div>


  <div class="powered-by">powered by 杭城小刘</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  

  

  

</body>
</html>
